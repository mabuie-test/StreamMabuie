<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>StealthCam â€” Login (Form)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">SC</div>
      <div><h2 style="margin:0">StealthCam</h2><div class="small">Login (form)</div></div>
    </div>

    <div class="card" style="margin-top:14px;max-width:420px">
      <!-- Form simples: envia para /api/auth/login-web (servidor processa e grava token) -->
      <form action="/api/auth/login-web" method="post">
        <label class="small">Username</label>
        <input name="username" class="input" placeholder="username" required />
        <label class="small" style="margin-top:8px">Password</label>
        <input name="password" type="password" class="input" placeholder="password" required />
        <div style="display:flex;gap:8px;margin-top:12px">
          <button type="submit" class="btn">Login</button>
          <button id="btnDemo" type="button" class="btn" style="background:#7c3aed">Criar demo</button>
        </div>
      </form>
      <div id="msg" class="small" style="margin-top:8px;color:#f88"></div>
    </div>
  </div>

<script>
document.getElementById('btnDemo').addEventListener('click', async function(){
  const msg = document.getElementById('msg');
  msg.innerText = 'Criando demo...';
  try {
    const u = 'demo' + Math.floor(Math.random()*10000);
    const r = await fetch('/api/auth/register', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ username: u, password: 'demo1234' })});
    if (!r.ok) { msg.innerText = 'Erro ao criar demo'; return; }
    msg.innerText = 'Demo criado. Username: ' + u + ' / pass: demo1234';
  } catch(e) { msg.innerText = 'Erro: ' + e.message; }
});
</script>
</body>
</html>
